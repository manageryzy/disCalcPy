# 数据格式


##计算节点数据格式

### 输入数据格式

* 控制数据：json文件，一个json的Object，有不确定的元素。需要由控制系统生成。并且要在里面追加一个参数，用来指定已经完成的迭代数。此外还有初始权值的路径也是一个必要的需要追加的参数。
* 初始权值：由控制系统来准备，如果是刚开始计算（比如系统刚启动分配到任务，或者是断点继续计算），这个时候需要从文件服务器拉取数据。至于拉取那个数据由控制系统决定。如果是不是刚开始计算的话，那么继续使用上一次迭代产生的权值就好。这个文件的内容不用管，可以认为是黑盒，但是用哪个文件还是需要管理的，此外这个文件的路径也需要设置一个参数放置在json里面。

### 输出数据格式

* 控制数据：json文件，包含各种统计结果，以及一个经过+1的迭代数还有输出的权值的路径。各种结果需要统计到主节点并且用来动态产生报表。
* 计算后权值：黑盒。需要上传到文件服务器。

## 中央节点数据格式

这里就是指添加数据的时候输入的数据格式

* 批量导入配置：这是一个json（？其他形式也可以，只要你开心就好）文件。这个文件要包含若干参数，参数的个数未知。每一个参数可能是一个具体的值（数、字符串），也可能是一个数组。如果参数是数组的话就需要对参数展开：

假设有参数ABC：
	
	{
		A:[1,2,3],
		B:2,
		C:[4,5]	
	}

那么展开之后的结果是

	[
		{
			A:1,
			B:2,
			C:4
		},
		{
			A:2,
			B:2,
			C:4
		},
		{
			A:3,
			B:2,
			C:4
		},
		{
			A:1,
			B:2,
			C:5
		},
		{
			A:2,
			B:2,
			C:5
		},
		{
			A:3,
			B:2,
			C:5
		},
	]

这六个任务将会被分发到网络中进行计算。

* 初始权值：进行批量添加任务的时候应该可以指定这些任务的初始权值。可能的情况有两种
	* 预先上传初始权值，然后计算的时候根据预置初始权值的序号进行选择计算
	* 自动生成初始权值：经过配置之后再每个计算节点里面生成初始权值。初始权值的生成程序就是[https://github.com/manageryzy/disCalcPy/blob/0.1/worker-node/genNet.py](https://github.com/manageryzy/disCalcPy/blob/0.1/worker-node/genNet.py)